!function(a,b){"use strict";"function"==typeof define&&define.amd?define(["angular","spin"],b):a.Spinner=b(window.angular,window.Spinner)}(this,function(a,b){"use strict";a.module("angularSpinner",[]).factory("usSpinnerService",["$rootScope",function(a){var b={};return b.spin=function(b){a.$broadcast("us-spinner:spin",b)},b.stop=function(b){a.$broadcast("us-spinner:stop",b)},b}]).directive("usSpinner",function(){return{scope:!0,controller:["$scope","$element","$attrs",function(b,c,d){b.spinner=null,b.key=a.isDefined(d.spinnerKey)?d.spinnerKey:!1,b.startActive=a.isDefined(d.spinnerStartActive)?d.spinnerStartActive:!b.key,b.spin=function(){b.spinner&&b.spinner.spin(c[0])},b.stop=function(){b.spinner&&b.spinner.stop()}}],link:function(a,c,d){a.$watch(d.usSpinner,function(d){a.stop(),a.spinner=new b(d),(!a.key||a.startActive)&&a.spinner.spin(c[0])},!0),a.$on("us-spinner:spin",function(b,c){c===a.key&&a.spin()}),a.$on("us-spinner:stop",function(b,c){c===a.key&&a.stop()}),a.$on("$destroy",function(){a.stop(),a.spinner=null})}}})});